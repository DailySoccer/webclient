
<!-- USER LINEUP SECTION -->
<section class="view-contest-section" ng-show="isLineupFieldContestEntryActive">
  <user-shortinfo-bar user="mainPlayer"></user-shortinfo-bar>
  
  <lineup-field-selector lineup-slots="lineupSlots"
                         on-lineup-slot-selected="onLineupSlotSelected(slotIndex)"
                         formation-id="formationId"
                         lineup-formation="lineupFormation"
                         formation-is-modifiable="false"
                         show-salary="displayChangeablePlayers"
                         is-live="true"
                         highlight-changeables="displayChangeablePlayers"></lineup-field-selector>
                         
  <button class="make-change-btn" ng-click="switchDisplayChangeablePlayers()">{{changesButtonText()}} <i class="material-icons">&#xE8D5;</i></button>
  <div class="salary-info-wrapper">
    <div class="current-salary"><span class="current-salary-label">Presupuesto </span><span class="current-salary-amount" ng-class="{'red-numbers': availableSalary < 0 }">{{formatCurrency(printableCurrentSalary)}}</span></div>
    <div class="limit-salary"><span class="limit-salary-label">Límite </span><span class="limit-salary-amount">{{formatCurrency(printableSalaryCap)}}</span></div>
  </div>
</section>

<!-- CONTEST INFO SECTION -->
<section class="contest-info-section" ng-show="isContestInfoActive">
  <contest-info the-contest="contest" ng-if="contest != null"></contest-info>
</section>

<!-- RIVALS SECTION -->
<section class="rivals-list-section" ng-if="isRivalsListActive">
  <div class="rivals-list-table-header">
    <div class="rivals-list-column-position">Pos.</div>
    <div class="rivals-list-column-name">Nombre</div>
    <div class="rivals-list-column-timeleft">T.R.</div>
    <div class="rivals-list-column-points">Puntos</div>
  </div>
  <div class="rivals-list-table-body">
    <div class="rivals-list-table-row" ng-repeat="rival in rivalList" ng-class="{'current-user-row': isMainPlayer(rival)}" ng-click="onUserClick(rival)">
      <div class="rivals-list-column-position">{{ $index + 1 }}</div>
      <div class="rivals-list-column-name">{{name(rival)}}</div>
      <div class="rivals-list-column-timeleft">{{percentLeft(rival)}}</div>
      <div class="rivals-list-column-points">{{points(rival)}}</div>
    </div>
  </div>
</section>

<!-- COMPARE LINEUPS SECTION -->
<section class="view-comparative-section" ng-show="isComparativeActive">
  <user-shortinfo-bar user="selectedOpponent"></user-shortinfo-bar>
  
  <lineup-field-selector lineup-slots="opponentLineupSlots"
                         on-lineup-slot-selected="onOpponentLineupSlotSelected(slotIndex)"
                         formation-id="opponentFormationId"
                         lineup-formation="opponentLineupFormation"
                         formation-is-modifiable="false"
                         show-salary="false"
                         is-live="true"></lineup-field-selector>
  <div class="salary-info-wrapper">
    <div class="current-salary"><span class="current-salary-label">Presupuesto </span><span class="current-salary-amount">{{formatCurrency(printableOpponentSalary)}}</span></div>
    <div class="limit-salary"><span class="limit-salary-label">Límite </span><span class="limit-salary-amount">{{formatCurrency(printableSalaryCap)}}</span></div>
  </div>
</section>

<!-- SOCCER PLAYER LIST -->
<section class="soccer-player-list-section" ng-if="isSelectingSoccerPlayerActive">
  <soccer-players-scalinglist soccer-players="allSoccerPlayers"
                              lineup-filter="lineupSlots"
                              manager-level="playerManagerLevel"
                              contest="contest"
                              favorites-list="favoritesPlayers"
                              only-favorites="onlyFavorites"
                              field-pos-filter="fieldPosFilter"
                              name-filter="nameFilter"
                              match-filter="matchFilter"
                              on-info-click="onSoccerPlayerInfoClick(soccerPlayerId)"
                              on-action-click="onSoccerPlayerActionButton(soccerPlayer)"></soccer-players-scalinglist>
  <div class="salary-info-wrapper">
    <div class="current-salary"><span class="current-salary-label">Presupuesto </span><span class="current-salary-amount" ng-class="{'red-numbers': availableSalary < 0 }">{{formatCurrency(printableSalaryForChange)}}</span></div>
    <div class="limit-salary"><span class="limit-salary-label">Límite </span><span class="limit-salary-amount">{{formatCurrency(printableSalaryCap)}}</span></div>
  </div>
</section>


<!-- SOCCER PLAYER STATS -->
<section class="soccer-player-list-section" ng-show="isSoccerPlayerStatsActive">
  <soccer-player-stats contest-id="contest.contestId" instance-soccer-player-id="instanceSoccerPlayerDisplayInfo" selectable-player="false"></soccer-player-stats>
</section>


<modal-window class="soccer-player-gameplays small" show-header="true" title="'Puntos de jugador'" show-window="isGameplaysModalOn">
  <div class="soccer-player-gameplays-name">
    <div class="gameplays-label">{{gameplaysPlayer.name}}</div>
    <div class="gameplays-data">{{gameplaysPlayer.livePoints}}</div>
  </div>
  <div class="soccer-player-gameplays-data" ng-repeat="gameplay in soccerPlayerGameplays">
    <div class="gameplays-label">{{gameplay['name']}}</div>
    <div class="gameplays-data">{{gameplay['points']}}</div>
  </div>
</modal-window>

<modal-window class="change-soccer-player-confirm-modal small" show-header="false" show-window="isConfirmModalOn">
  <div class="change-soccer-player-confirm-content">
    <p class="change-soccer-player-confirm-question">{{getLocalizedText('change-player-modal')}}</p>
    <div class="change-soccer-player-changing-players">
      <div class="change-soccer-player-changing-labels">
        <span class='change-soccer-player player-old' ng-if="changingPlayer != null">sale</span>
        <span class='change-soccer-player player-new' ng-if="newSoccerPlayer != null">entra</span>
      </div>
      <div class="change-soccer-player-changing-data">
        <span class='change-soccer-player player-old' ng-if="changingPlayer != null">{{changingPlayer.soccerPlayer.name}}</span>
        <i class="material-icons">&#xE8D5;</i>
        <span class='change-soccer-player player-new' ng-if="newSoccerPlayer != null">{{newSoccerPlayer.soccerPlayer.name}}</span>
      </div>
    </div>
  </div>
  <div class="change-soccer-player-actions-wrapper">
    <button class="change-soccer-player-cancel" ng-click="hideConfirmModal()">Cancelar</button>
    <button class="change-soccer-player-confirm" ng-click="makeSoccerPlayerSubstitution()">Realizar Sustitución</button>
  </div>
</modal-window>

<!--section>

  <contest-header id="contestHeader" contest="contest" contest-id="contestId" match-filter="matchFilter" show-filter="isMakingChange"></contest-header>

  <div id="viewContestRoot" ng-switch="scrDet.isXsScreen" ng-class="{ 'making-change-state': isMakingChange }">
    <div ng-switch-when="true">
     <!-- Tabs de la versión XS ->
      <ul class="view-contest-tabs" id="liveContestTab" >
        <li class="active"> <tab id="userFantasyTeamTab" ng-click="tabChange('userFantasyTeam')">{{getLocalizedText("yourlineup")}}</tab></li>
        <li>                <tab id="usersListTab" ng-click="tabChange('usersList')">{{getLocalizedText("users")}}</tab></li>
        <li ng-disabled="!isOpponentSelected"><tab id="opponentFantasyTeamTab" ng-click="tabChange('opponentFantasyTeam')">{{lastOpponentSelected}}</tab></li>
      </ul>

      <div class="tab-content" id="liveContestTabContent">
      
      
        <div class="tab-pane active" id="userFantasyTeam">
          <fantasy-team contest-entry="mainPlayer" watch="updatedDate" is-opponent="false" show-changes="showChanges" num-changes="numAvailableChanges"
                        on-request-change="onRequestChange(instanceSoccerPlayer)" changing-soccer-id="changingPlayerId" available-salary="remainingSalaryChangingPlayer"></fantasy-team>
          
          
          <button type="button" class="btn-cancel-player-selection" ng-click="closePlayerChanges()" ng-if="isMakingChange">{{getLocalizedText("buttoncancel")}}</button>
          <div class="soccer-player-changes-list" ng-show="isMakingChange">
            <soccer-players-filter show-on-xs="true"  position-filters-enabled="false" name-filter="nameFilter" 
                                   field-pos-filter="fieldPosFilter" only-favorites="onlyFavorites"></soccer-players-filter>
            <soccer-players-list soccer-players="allSoccerPlayers" contest="contest"
                                 lineup-filter="lineupSlots" manager-level="userManagerLevel"
                                 favorites-list="favoritesPlayers" only-favorites="onlyFavorites"
                                 field-pos-filter="fieldPosFilter" name-filter="nameFilter" match-filter="matchFilter"
                                 on-row-click="onRowClick(soccerPlayerId)" hide-lineup-players="true"
                                 on-action-click="onSoccerPlayerActionButton(soccerPlayer)"
                                 additional-gold-price="changePrice"></soccer-players-list>
          </div>
          <button type="button" class="btn-cancel-player-selection" ng-click="closePlayerChanges()" ng-if="isMakingChange">{{getLocalizedText("buttoncancel")}}</button>
        </div>
        
        <users-list class="tab-pane" id="usersList" contest-entries="contestEntries" on-row-click="onUserClick(contestEntry)" watch="updatedDate"></users-list>
        
        
        <fantasy-team class="tab-pane" is-opponent="true" id="opponentFantasyTeam" parent="ctrl" contest-entry="selectedOpponent" watch="updatedDate"></fantasy-team>
        
        
      </div>
    </div>
    
    <div ng-switch-when="false">
      <fantasy-team id="userFantasyTeam" contest-entry="mainPlayer" watch="updatedDate" is-opponent="false" show-changes="showChanges" num-changes="numAvailableChanges"
                    on-request-change="onRequestChange(instanceSoccerPlayer)" changing-soccer-id="changingPlayerId" available-salary="remainingSalaryChangingPlayer"></fantasy-team>
      <users-list id="usersList" ng-show="selectedOpponent == null && !isMakingChange" contest-entries="contestEntries" on-row-click="onUserClick(contestEntry)" watch="updatedDate"></users-list>
      <fantasy-team id="opponentFantasyTeam" contest-entry="selectedOpponent" is-opponent="true" ng-show="selectedOpponent != null && !isMakingChange"
                    show-close-button="true" on-close="selectedOpponent=null" watch="updatedDate"></fantasy-team>
      <div class="soccer-player-changes-list" ng-show="isMakingChange">
        <soccer-players-filter show-on-xs="true"  position-filters-enabled="false" name-filter="nameFilter" 
                               field-pos-filter="fieldPosFilter" only-favorites="onlyFavorites"></soccer-players-filter>
        <soccer-players-list soccer-players="allSoccerPlayers" contest="contest"
                             lineup-filter="lineupSlots" manager-level="userManagerLevel"
                             favorites-list="favoritesPlayers" only-favorites="onlyFavorites"
                             field-pos-filter="fieldPosFilter" name-filter="nameFilter" match-filter="matchFilter"
                             on-row-click="onRowClick(soccerPlayerId)" hide-lineup-players="true"
                             on-action-click="onSoccerPlayerActionButton(soccerPlayer)"
                             additional-gold-price="changePrice"></soccer-players-list>
      </div>
    </div>
    <div class="contest-id-bar">
      <!--div class="contest-id">CHANGES AVAILABLE: {{numAvailableChanges}} || SALARY: {{remainingSalary}} ({{lineupCost}}/{{maxSalary}}) || PLAYER: {{changingSalaryPlayer}} || ID: {{contest.contestId.toUpperCase()}}</div->
      <div class="contest-id">ID: {{contest.contestId.toUpperCase()}}</div>
    </div>
    <div class="clear-fix-bottom"></div>
  </div>

</section>

<ng-view></ng-view-->
